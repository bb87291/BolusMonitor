# Bolus Monitor - Android App

## –ß—Ç–æ —ç—Ç–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–µ–ª–∞–µ—Ç:

‚úÖ –ú–æ–Ω–∏—Ç–æ—Ä–∏—Ç API –∫–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç: http://127.0.0.1:17580/treatments.json?count=1
‚úÖ –ò–∑–≤–ª–µ–∫–∞–µ—Ç timestamp –±–æ–ª—é—Å–∞ (created_at)
‚úÖ –°—Ä–∞–≤–Ω–∏–≤–∞–µ—Ç —Å –ø—Ä–µ–¥—ã–¥—É—â–∏–º –∑–Ω–∞—á–µ–Ω–∏–µ–º
‚úÖ –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –ø—Ä–∏ –Ω–æ–≤–æ–º –±–æ–ª—é—Å–µ
‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç –≤ —Ñ–æ–Ω–µ (–¥–∞–∂–µ –ø—Ä–∏ –≤—ã–∫–ª—é—á–µ–Ω–Ω–æ–º —ç–∫—Ä–∞–Ω–µ)
‚úÖ –ê–≤—Ç–æ–∑–∞–ø—É—Å–∫ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ —Ç–µ–ª–µ—Ñ–æ–Ω–∞
‚úÖ –ú–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ –±–∞—Ç–∞—Ä–µ–∏

## –ö–∞–∫ —Å–æ–±—Ä–∞—Ç—å APK:

### –í–∞—Ä–∏–∞–Ω—Ç 1: Android Studio

1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å Android Studio: https://developer.android.com/studio
2. –û—Ç–∫—Ä—ã—Ç—å –ø—Ä–æ–µ–∫—Ç (–ø–∞–ø–∫–∞ BolusMonitor)
3. Build ‚Üí Build Bundle(s) / APK(s) ‚Üí Build APK(s)
4. APK –±—É–¥–µ—Ç –≤: app/build/outputs/apk/debug/app-debug.apk

### –í–∞—Ä–∏–∞–Ω—Ç 2: –ö–æ–º–∞–Ω–¥–Ω–∞—è —Å—Ç—Ä–æ–∫–∞ (Gradle)

```bash
cd BolusMonitor
./gradlew assembleDebug
```

APK: app/build/outputs/apk/debug/app-debug.apk

### –í–∞—Ä–∏–∞–Ω—Ç 3: Online Build Service

–ó–∞–≥—Ä—É–∑–∏—Ç—å –ø—Ä–æ–µ–∫—Ç –Ω–∞:
- https://appetize.io
- https://appcircle.io
- https://bitrise.io

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –Ω–∞ —Ç–µ–ª–µ—Ñ–æ–Ω:

1. –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å app-debug.apk –Ω–∞ —Ç–µ–ª–µ—Ñ–æ–Ω
2. –û—Ç–∫—Ä—ã—Ç—å —Ñ–∞–π–ª
3. –†–∞–∑—Ä–µ—à–∏—Ç—å —É—Å—Ç–∞–Ω–æ–≤–∫—É –∏–∑ –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω—ã—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤
4. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:

1. –û—Ç–∫—Ä—ã—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
2. –ù–∞–∂–∞—Ç—å START
3. –î–∞—Ç—å —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è (—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è)
4. –ì–æ—Ç–æ–≤–æ! –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ —Ñ–æ–Ω–µ

## –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å:

- **Status**: Running / Stopped
- **Last Bolus**: Timestamp –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –±–æ–ª—é—Å–∞
- **Last Check**: –í—Ä–µ–º—è –ø–æ—Å–ª–µ–¥–Ω–µ–π –ø—Ä–æ–≤–µ—Ä–∫–∏ API
- **–ö–Ω–æ–ø–∫–∞ START/STOP**: –ó–∞–ø—É—Å–∫/–æ—Å—Ç–∞–Ω–æ–≤–∫–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞

## –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è:

–ü—Ä–∏ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–∏ –Ω–æ–≤–æ–≥–æ –±–æ–ª—é—Å–∞:
- –ó–∞–≥–æ–ª–æ–≤–æ–∫: "üéØ NEW BOLUS!"
- –¢–µ–∫—Å—Ç: "New insulin injection detected"
- –ó–≤—É–∫ + –≤–∏–±—Ä–∞—Ü–∏—è
- Priority: High

## –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:

- Android 7.0+ (API 24+)
- –ò–Ω—Ç–µ—Ä–Ω–µ—Ç –Ω–µ –Ω—É–∂–µ–Ω (—Ä–∞–±–æ—Ç–∞–µ—Ç —Å localhost)
- Root –Ω–µ –Ω—É–∂–µ–Ω

## –†–∞–∑—Ä–µ—à–µ–Ω–∏—è:

- INTERNET - –¥–ª—è HTTP –∑–∞–ø—Ä–æ—Å–æ–≤
- POST_NOTIFICATIONS - –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
- RECEIVE_BOOT_COMPLETED - –¥–ª—è –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫–∞
- WAKE_LOCK - –¥–ª—è —Ä–∞–±–æ—Ç—ã –≤ —Ñ–æ–Ω–µ

## –õ–æ–≥–∏:

–°–º–æ—Ç—Ä–µ—Ç—å –ª–æ–≥–∏ —á–µ—Ä–µ–∑ Android Studio –∏–ª–∏ adb:

```bash
adb logcat | grep BolusCheckWorker
```

## –ö–æ–¥:

- `MainActivity.java` - –≥–ª–∞–≤–Ω—ã–π —ç–∫—Ä–∞–Ω –∏ UI
- `BolusCheckWorker.java` - —Ñ–æ–Ω–æ–≤—ã–π –≤–æ—Ä–∫–µ—Ä (–ø—Ä–æ–≤–µ—Ä–∫–∞ API)
- `BootReceiver.java` - –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ —Å–∏—Å—Ç–µ–º—ã
- `activity_main.xml` - UI layout

## –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏:

- AndroidX WorkManager - –¥–ª—è —Ñ–æ–Ω–æ–≤—ã—Ö –∑–∞–¥–∞—á
- HttpURLConnection - –¥–ª—è HTTP –∑–∞–ø—Ä–æ—Å–æ–≤
- SharedPreferences - –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö
- NotificationManager - –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

## TODO (–±—É–¥—É—â–∏–µ –≤–µ—Ä—Å–∏–∏):

- [ ] –ù–∞—Å—Ç—Ä–æ–π–∫–∏ (–∏–Ω—Ç–µ—Ä–≤–∞–ª, URL)
- [ ] Telegram —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è (–¥–ª—è iPhone)
- [ ] –ò—Å—Ç–æ—Ä–∏—è –±–æ–ª—é—Å–æ–≤
- [ ] –ì—Ä–∞—Ñ–∏–∫–∏
- [ ] –≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö
